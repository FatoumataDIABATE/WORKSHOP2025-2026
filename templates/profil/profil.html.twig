{% extends 'base.html.twig' %}

{% block title %}Résilink - Mon profil
{% endblock %}

{% block styles %}
	<link rel="stylesheet" href="{{ asset('css/profile.css') }}">
{% endblock %}

{% block body %}
	<main class="profile">
		<section class="page-head container">
			<h1>Mon Profil</h1>
			<p class="lead">Gérez vos informations personnelles et préférences</p>
		</section>

		<section class="container grid">
			<aside class="card side">
				<div class="avatar placeholder" aria-hidden="true">{{ app.user.pseudo|first|upper }}</div>

				<div class="identity">
					<strong class="pseudo">{{ app.user.pseudo }}</strong>
				</div>

				<ul class="meta">
					<li>
						<span class="i i-calendar" aria-hidden="true"></span>
						<div>
							<span class="muted">Membre depuis</span>
							<strong>le
								{{ app.user.createdAt|date('d/m/Y', 'Europe/Paris') }}</strong>
						</div>
					</li>
					<li>
						<span class="i i-time" aria-hidden="true"></span>
						<div>
							<span class="muted">Dernière activité</span>
							<strong>
								{% if app.user.lastLogin %}
									{% set now  = "now"|date('U') %}
									{% set last = app.user.lastLogin|date('U') %}
									{% set diff = now - last %}

									{% if diff < 60 %}
										il y a
										{{ diff }}
										s
									{% elseif diff < 3600 %}
										il y a
										{{ (diff / 60)|round(0, 'floor') }}
										min
									{% elseif diff < 86400 %}
										il y a
										{{ (diff / 3600)|round(0, 'floor') }}
										h
									{% elseif diff < 2592000 %}
										il y a
										{{ (diff / 86400)|round(0, 'floor') }}
										j
									{% else %}
										le
										{{ app.user.lastLogin|date('d/m/Y', 'Europe/Paris') }}
									{% endif %}
								{% else %}
									-
								{% endif %}
							</strong>
						</div>
					</li>
				</ul>

				<div class="stats">
					<div class="stat">
						<span class="value">1247</span>
						<span class="label">Messages</span>
					</div>
					<div class="stat">
						<span class="value">8</span>
						<span class="label">Conversations</span>
					</div>
				</div>

				<div class="badge">
					<span class="dot"></span>Compte Sécurisé</div>
			</aside>

			<div class="main">
				<section class="card">
					<h2 class="section-title">
						<span class="icon icon-shield" aria-hidden="true"></span>
						Sécurité
					</h2>
					<p class="muted">Paramètres de sécurité et confidentialité</p>

					<nav class="list-actions">
						<a class="list-item" href="#">Changer le mot de passe</a>
						<a class="list-item" href="#">Gérer les sessions actives</a>
						<a class="list-item" href="#">Télécharger mes données</a>
					</nav>

					<div class="danger-zone">
						<button type="button" class="btn btn--block btn--muted">Supprimer le compte</button>
					</div>
				</section>
			</div>
		</section>
	</main>
{% endblock %}
